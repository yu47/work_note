1. √ 控制端增加最后上线时间。
2. √ 两种回连方式，增加间隔某一天，在某个时间段，间隔多少时间回连一次。
3. √ 服务端与被控制长时间不操作断开连接。
4. √ 第一次植入，直接回连一次。
5. √ 服务端 运行不输出，在后台显示。
6. √ 服务端 增加一个重定向。
7. √ 信息获取增加history。   /etc/bash.history   
8. √ arp -a  
9. √ 定时上线增加轮询。
10. √ 端口扫描默认端口显示出来。
11. √ 增加ping探测主机。
12. √ 文件管理：第一次上线时，获取3级目录和指定的文件夹目录。下一次上线时，对比差异
13. √ build配置端增加生成日志。
14. √ 更新功能修改为新增功能。



时间:time ip1:port1 ip2:port2 ip3:port3 token:xxx day:hour:mim:s  架构x86 进程名

1. 重定向
2. 进程获取



```
start = time(NULL) - 60 60 24

cur - start > 1day

if 22 - 23
	间隔上线
	flag = 1
else
	if (flag == 1 && hour1 ~ hour2)
		start = cur - 60 60 24
1 12    22-23
1 22-23 上线    24下线     2 22-23 上线
1 22-23 上线    2 22-23下线		间隔上线
```

上线时间

文件差异

kill

shell历史记录逻辑



```
被控端上线    服务端发送需要监听的文件夹   被控端获取，查询，发送控制端。 控制端写入数据库。

控制端中设备上线， 发送指令向服务端   服务端返回指定的uuid的缓存。控制端接收缓存写入数据据库。	



```



被控端再一次上线    发送数据给服务端   覆盖缓存，只存最新的数据.

控制端上线		从服务端拿最新数据	旧数据备份.



问题:message 不完成  存在中断



控制端

